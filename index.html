<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario de Objetivos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header h1 {
            color: #32b8c6;
            font-size: 28px;
        }

        .month-nav {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .month-nav button {
            background: #32b8c6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }

        .month-nav button:hover {
            background: #2da5b1;
        }

        .month-nav span {
            font-size: 20px;
            font-weight: 600;
            min-width: 200px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #2a2a2a;
            border: 1px solid #404040;
            border-radius: 12px;
            padding: 24px;
        }

        .stat-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-card-header span {
            font-size: 14px;
            color: #999;
            font-weight: 500;
        }

        .stat-icon {
            font-size: 24px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #e0e0e0;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        .calendar-section {
            background: #2a2a2a;
            border: 1px solid #404040;
            border-radius: 12px;
            padding: 24px;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: 20px;
        }

        .calendar-header {
            font-size: 12px;
            font-weight: 600;
            text-align: center;
            padding: 12px;
            color: #999;
            text-transform: uppercase;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #404040;
            border-radius: 8px;
            cursor: pointer;
            background: #2a2a2a;
            position: relative;
            transition: all 0.2s;
        }

        .calendar-day:hover {
            border-color: #32b8c6;
            transform: translateY(-2px);
        }

        .calendar-day.empty {
            cursor: default;
            opacity: 0.3;
        }

        .calendar-day.empty:hover {
            border-color: #404040;
            transform: none;
        }

        .calendar-day.today {
            border: 2px solid #32b8c6;
            font-weight: 700;
        }

        .calendar-day.has-tasks {
            background: #1e4a4f;
            border-color: #32b8c6;
        }

        .day-number {
            font-size: 16px;
            font-weight: 600;
        }

        .day-indicator {
            width: 6px;
            height: 6px;
            background: #32b8c6;
            border-radius: 50%;
            margin-top: 4px;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .objectives-section {
            background: #2a2a2a;
            border: 1px solid #404040;
            border-radius: 12px;
            padding: 24px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h2 {
            font-size: 20px;
            color: #e0e0e0;
        }

        .btn-add {
            background: #32b8c6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }

        .btn-add:hover {
            background: #2da5b1;
        }

        .objective-item {
            background: #1a1a1a;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .objective-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .objective-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .objective-desc {
            font-size: 13px;
            color: #999;
        }

        .objective-actions {
            display: flex;
            gap: 8px;
        }

        .btn-icon {
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #999;
            padding: 4px;
        }

        .btn-icon:hover {
            color: #32b8c6;
        }

        /* Scrollbar personalizado */
        .modal-content::-webkit-scrollbar,
        .task-list::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track,
        .task-list::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 4px;
        }

        .modal-content::-webkit-scrollbar-thumb,
        .task-list::-webkit-scrollbar-thumb {
            background: #32b8c6;
            border-radius: 4px;
        }

        .modal-content::-webkit-scrollbar-thumb:hover,
        .task-list::-webkit-scrollbar-thumb:hover {
            background: #2da5b1;
        }

        .progress-bar {
            height: 8px;
            background: #404040;
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #32b8c6, #4ade80);
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 14px;
            color: #32b8c6;
            font-weight: 600;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #2a2a2a;
            border-radius: 12px;
            padding: 24px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            font-size: 20px;
        }

        .btn-close {
            background: transparent;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .btn-close:hover {
            color: #e0e0e0;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #404040;
            border-radius: 8px;
            background: #1a1a1a;
            color: #e0e0e0;
            font-family: inherit;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn-primary {
            background: #32b8c6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            width: 100%;
        }

        .btn-primary:hover {
            background: #2da5b1;
        }

        .task-list {
            margin-top: 20px;
        }

        .task-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #1a1a1a;
            border: 1px solid #404040;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .task-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        .task-item.completed {
            opacity: 0.6;
        }

        .task-item.completed .task-text {
            text-decoration: line-through;
        }

        .task-text {
            flex: 1;
        }

        .task-badge {
            font-size: 11px;
            padding: 2px 8px;
            background: #32b8c6;
            color: white;
            border-radius: 12px;
        }

        .delete-btn {
            background: #ff5459;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .delete-btn:hover {
            background: #e04449;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Calendario de Objetivos</h1>
            <div class="month-nav">
                <button onclick="changeMonth(-1)">‚Üê Anterior</button>
                <span id="currentMonth"></span>
                <button onclick="changeMonth(1)">Siguiente ‚Üí</button>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-card-header">
                    <span>Objetivos Activos</span>
                    <span class="stat-icon">üéØ</span>
                </div>
                <div class="stat-value" id="activeGoals">0</div>
            </div>

            <div class="stat-card">
                <div class="stat-card-header">
                    <span>Completados</span>
                    <span class="stat-icon">‚úÖ</span>
                </div>
                <div class="stat-value" id="completedGoals">0</div>
            </div>

            <div class="stat-card">
                <div class="stat-card-header">
                    <span>Racha Actual</span>
                    <span class="stat-icon">üî•</span>
                </div>
                <div class="stat-value" id="currentStreak">0</div>
            </div>

            <div class="stat-card">
                <div class="stat-card-header">
                    <span>Promedio Mensual</span>
                    <span class="stat-icon">üìà</span>
                </div>
                <div class="stat-value" id="monthlyAverage">0%</div>
            </div>
        </div>

        <div class="main-content">
            <div class="calendar-section">
                <div class="calendar">
                    <div class="calendar-header">Dom</div>
                    <div class="calendar-header">Lun</div>
                    <div class="calendar-header">Mar</div>
                    <div class="calendar-header">Mi√©</div>
                    <div class="calendar-header">Jue</div>
                    <div class="calendar-header">Vie</div>
                    <div class="calendar-header">S√°b</div>
                </div>
                <div class="calendar" id="calendarGrid"></div>
            </div>

            <div class="sidebar">
                <div class="objectives-section">
                    <div class="section-header">
                        <h2>Objetivos</h2>
                        <button class="btn-add" onclick="openObjectiveModal()">+ Agregar</button>
                    </div>
                    <div id="objectivesList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para objetivos -->
    <div class="modal" id="objectiveModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="objectiveModalTitle">Nuevo Objetivo</h3>
                <button class="btn-close" onclick="closeObjectiveModal()">√ó</button>
            </div>
            <input type="hidden" id="editingObjectiveId">
            <div class="form-group">
                <label>T√≠tulo</label>
                <input type="text" id="objectiveTitle" placeholder="Ej: Aumentar ventas">
            </div>
            <div class="form-group">
                <label>Descripci√≥n</label>
                <textarea id="objectiveDesc" placeholder="Describe tu objetivo..."></textarea>
            </div>
            <button class="btn-primary" onclick="saveObjective()">Guardar Objetivo</button>
        </div>
    </div>

    <!-- Modal para tareas del d√≠a -->
    <div class="modal" id="dayModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Tareas del D√≠a</h3>
                <button class="btn-close" onclick="closeDayModal()">√ó</button>
            </div>
            <div class="form-group">
                <label>Nueva Tarea</label>
                <input type="text" id="newTask" placeholder="Escribe una tarea...">
            </div>
            <div class="form-group">
                <label>Hora (opcional)</label>
                <input type="time" id="taskTime">
            </div>
            <div class="form-group">
                <label>Fecha inicio</label>
                <input type="date" id="taskStartDate">
            </div>
            <div class="form-group">
                <label>Fecha fin</label>
                <input type="date" id="taskEndDate">
            </div>
            <div class="form-group">
                <label>Vincular a objetivo</label>
                <select id="linkedObjective">
                    <option value="">Sin vincular</option>
                </select>
            </div>
            <div class="form-group">
                <label>Peso de la tarea (%)</label>
                <input type="number" id="taskWeight" min="1" max="100" value="10">
            </div>
            <button class="btn-primary" onclick="addTask()">Agregar Tarea</button>
            <div class="task-list" id="taskList"></div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentDate = new Date();
        let selectedDay = null;
        let objectives = [];
        let dayData = {};

        // Cargar datos guardados
        function loadData() {
            const savedObjectives = localStorage.getItem('objectives');
            const savedDayData = localStorage.getItem('dayData');
            
            if (savedObjectives) {
                objectives = JSON.parse(savedObjectives);
            } else {
                // Datos de ejemplo
                objectives = [
                    { id: 1, title: "Aumentar Ventas", description: "Meta mensual de crecimiento", current: 65 },
                    { id: 2, title: "Entrenar Personal", description: "Capacitar al equipo", current: 30 },
                    { id: 3, title: "Satisfacci√≥n Cliente", description: "Mantener 5 estrellas", current: 90 }
                ];
            }
            
            if (savedDayData) {
                dayData = JSON.parse(savedDayData);
            }
        }

        // Guardar datos
        function saveData() {
            localStorage.setItem('objectives', JSON.stringify(objectives));
            localStorage.setItem('dayData', JSON.stringify(dayData));
        }

        // Inicializar
        function init() {
            loadData();
            updateMonthDisplay();
            renderCalendar();
            renderObjectives();
            updateStats();
        }

        // Cambiar mes
        function changeMonth(delta) {
            currentDate.setMonth(currentDate.getMonth() + delta);
            updateMonthDisplay();
            renderCalendar();
        }

        function updateMonthDisplay() {
            const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                            'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            document.getElementById('currentMonth').textContent = 
                `${months[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
        }

        // Renderizar calendario
        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();
            
            grid.innerHTML = '';
            
            // D√≠as vac√≠os al inicio
            for (let i = 0; i < firstDay; i++) {
                const emptyDiv = document.createElement('div');
                emptyDiv.className = 'calendar-day empty';
                grid.appendChild(emptyDiv);
            }
            
            // D√≠as del mes
            for (let day = 1; day <= daysInMonth; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                
                const dateKey = `${year}-${month}-${day}`;
                const hasTasks = dayData[dateKey] && dayData[dateKey].length > 0;
                
                if (hasTasks) {
                    dayDiv.classList.add('has-tasks');
                }
                
                if (today.getDate() === day && today.getMonth() === month && today.getFullYear() === year) {
                    dayDiv.classList.add('today');
                }
                
                dayDiv.innerHTML = `
                    <span class="day-number">${day}</span>
                    ${hasTasks ? '<div class="day-indicator"></div>' : ''}
                `;
                
                dayDiv.onclick = () => openDayModal(day);
                grid.appendChild(dayDiv);
            }
        }

        // Abrir modal del d√≠a
        function openDayModal(day) {
            selectedDay = day;
            const dateKey = `${currentDate.getFullYear()}-${currentDate.getMonth()}-${day}`;
            
            document.getElementById('modalTitle').textContent = `Tareas - ${day} de ${getMonthName()}`;
            document.getElementById('dayModal').classList.add('active');
            
            // Llenar selector de objetivos
            const select = document.getElementById('linkedObjective');
            select.innerHTML = '<option value="">Sin vincular</option>';
            objectives.forEach(obj => {
                select.innerHTML += `<option value="${obj.id}">${obj.title}</option>`;
            });
            
            // Establecer fecha del d√≠a seleccionado
            const selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
            const dateString = selectedDate.toISOString().split('T')[0];
            document.getElementById('taskStartDate').value = dateString;
            document.getElementById('taskEndDate').value = dateString;
            
            renderTasks();
        }

        function closeDayModal() {
            document.getElementById('dayModal').classList.remove('active');
        }

        function getMonthName() {
            const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                            'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            return months[currentDate.getMonth()];
        }

        // Agregar tarea
        function addTask() {
            const taskText = document.getElementById('newTask').value.trim();
            const taskTime = document.getElementById('taskTime').value;
            const linkedObjId = document.getElementById('linkedObjective').value;
            const taskWeight = parseInt(document.getElementById('taskWeight').value) || 10;
            const startDate = new Date(document.getElementById('taskStartDate').value);
            const endDate = new Date(document.getElementById('taskEndDate').value);
            
            if (!taskText) return;
            
            // Validar fechas
            if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
                alert('Por favor selecciona fechas v√°lidas');
                return;
            }
            
            if (endDate < startDate) {
                alert('La fecha fin debe ser posterior a la fecha inicio');
                return;
            }
            
            const taskId = Date.now();
            let daysAffected = 0;
            
            // Agregar tarea a todos los d√≠as en el rango
            for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {
                const dateKey = `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`;
                
                if (!dayData[dateKey]) {
                    dayData[dateKey] = [];
                }
                
                const task = {
                    id: taskId + daysAffected,
                    text: taskText,
                    time: taskTime,
                    linkedObjectiveId: linkedObjId ? parseInt(linkedObjId) : null,
                    weight: taskWeight,
                    completed: false,
                    multiDay: true,
                    baseId: taskId
                };
                
                dayData[dateKey].push(task);
                daysAffected++;
            }
            
            alert(`Tarea agregada a ${daysAffected} d√≠a(s)`);
            
            document.getElementById('newTask').value = '';
            document.getElementById('taskTime').value = '';
            document.getElementById('taskWeight').value = '10';
            document.getElementById('linkedObjective').value = '';
            
            saveData();
            renderTasks();
            renderCalendar();
            updateStats();
        }

        // Renderizar tareas
        function renderTasks() {
            const dateKey = `${currentDate.getFullYear()}-${currentDate.getMonth()}-${selectedDay}`;
            const tasks = dayData[dateKey] || [];
            const container = document.getElementById('taskList');
            
            if (tasks.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">No hay tareas</p>';
                return;
            }
            
            container.innerHTML = tasks.map(task => {
                const objective = task.linkedObjectiveId ? objectives.find(o => o.id === task.linkedObjectiveId) : null;
                
                return `
                    <div class="task-item ${task.completed ? 'completed' : ''}">
                        <input type="checkbox" ${task.completed ? 'checked' : ''} 
                               onchange="toggleTask(${task.id})">
                        <div class="task-text">
                            ${task.text}
                            ${task.time ? `<br><small>‚è∞ ${task.time}</small>` : ''}
                        </div>
                        ${objective ? `<span class="task-badge">üéØ ${objective.title}</span>` : ''}
                        <button class="delete-btn" onclick="deleteTask(${task.id})">üóëÔ∏è</button>
                    </div>
                `;
            }).join('');
        }

        // Alternar tarea
        function toggleTask(taskId) {
            const dateKey = `${currentDate.getFullYear()}-${currentDate.getMonth()}-${selectedDay}`;
            const task = dayData[dateKey].find(t => t.id === taskId);
            
            if (task) {
                task.completed = !task.completed;
                
                if (task.linkedObjectiveId) {
                    updateObjectiveProgress(task.linkedObjectiveId);
                }
                
                saveData();
                renderTasks();
                renderCalendar();
                renderObjectives();
                updateStats();
            }
        }

        // Eliminar tarea
        function deleteTask(taskId) {
            if (!confirm('¬øEliminar esta tarea?')) return;
            
            const dateKey = `${currentDate.getFullYear()}-${currentDate.getMonth()}-${selectedDay}`;
            dayData[dateKey] = dayData[dateKey].filter(t => t.id !== taskId);
            
            saveData();
            renderTasks();
            renderCalendar();
            renderObjectives();
            updateStats();
        }

        // Actualizar progreso de objetivo
        function updateObjectiveProgress(objectiveId) {
            const objective = objectives.find(o => o.id === objectiveId);
            if (!objective) return;
            
            let totalWeight = 0;
            let completedWeight = 0;
            
            Object.keys(dayData).forEach(dateKey => {
                const dayTasks = dayData[dateKey].filter(t => t.linkedObjectiveId === objectiveId);
                dayTasks.forEach(task => {
                    totalWeight += task.weight;
                    if (task.completed) {
                        completedWeight += task.weight;
                    }
                });
            });
            
            if (totalWeight > 0) {
                objective.current = Math.min(100, Math.round((completedWeight / totalWeight) * 100));
            }
        }

        // Renderizar objetivos
        function renderObjectives() {
            const container = document.getElementById('objectivesList');
            
            container.innerHTML = objectives.map(obj => `
                <div class="objective-item">
                    <div class="objective-header">
                        <div>
                            <div class="objective-title">${obj.title}</div>
                            <div class="objective-desc">${obj.description}</div>
                        </div>
                        <div class="objective-actions">
                            <button class="btn-icon" onclick="editObjective(${obj.id})">‚úèÔ∏è</button>
                            <button class="btn-icon" onclick="deleteObjective(${obj.id})">üóëÔ∏è</button>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${obj.current}%"></div>
                    </div>
                    <div class="progress-text">${obj.current}%</div>
                </div>
            `).join('');
        }

        // Abrir modal de objetivo
        function openObjectiveModal() {
            document.getElementById('objectiveModalTitle').textContent = 'Nuevo Objetivo';
            document.getElementById('editingObjectiveId').value = '';
            document.getElementById('objectiveTitle').value = '';
            document.getElementById('objectiveDesc').value = '';
            document.getElementById('objectiveModal').classList.add('active');
        }

        function closeObjectiveModal() {
            document.getElementById('objectiveModal').classList.remove('active');
        }

        // Editar objetivo
        function editObjective(id) {
            const objective = objectives.find(o => o.id === id);
            if (!objective) return;
            
            document.getElementById('objectiveModalTitle').textContent = 'Editar Objetivo';
            document.getElementById('editingObjectiveId').value = id;
            document.getElementById('objectiveTitle').value = objective.title;
            document.getElementById('objectiveDesc').value = objective.description;
            document.getElementById('objectiveModal').classList.add('active');
        }

        // Guardar objetivo
        function saveObjective() {
            const title = document.getElementById('objectiveTitle').value.trim();
            const description = document.getElementById('objectiveDesc').value.trim();
            const editingId = document.getElementById('editingObjectiveId').value;
            
            if (!title) {
                alert('Por favor ingresa un t√≠tulo');
                return;
            }
            
            if (editingId) {
                // Editar objetivo existente
                const objective = objectives.find(o => o.id == editingId);
                if (objective) {
                    objective.title = title;
                    objective.description = description;
                }
            } else {
                // Crear nuevo objetivo
                objectives.push({
                    id: Date.now(),
                    title,
                    description,
                    current: 0
                });
            }
            
            document.getElementById('objectiveTitle').value = '';
            document.getElementById('objectiveDesc').value = '';
            document.getElementById('editingObjectiveId').value = '';
            
            saveData();
            closeObjectiveModal();
            renderObjectives();
            updateStats();
        }

        // Eliminar objetivo
        function deleteObjective(id) {
            if (!confirm('¬øEliminar este objetivo?')) return;
            
            objectives = objectives.filter(o => o.id !== id);
            saveData();
            renderObjectives();
            updateStats();
        }

        // Actualizar estad√≠sticas
        function updateStats() {
            const active = objectives.filter(o => o.current < 100).length;
            const completed = objectives.filter(o => o.current >= 100).length;
            
            document.getElementById('activeGoals').textContent = active;
            document.getElementById('completedGoals').textContent = completed;
            
            // Calcular racha
            let streak = 0;
            const today = new Date();
            for (let i = 0; i < 30; i++) {
                const checkDate = new Date(today);
                checkDate.setDate(checkDate.getDate() - i);
                const dateKey = `${checkDate.getFullYear()}-${checkDate.getMonth()}-${checkDate.getDate()}`;
                const dayTasks = dayData[dateKey];
                
                if (dayTasks && dayTasks.some(t => t.completed)) {
                    streak++;
                } else if (i > 0) {
                    break;
                }
            }
            
            document.getElementById('currentStreak').textContent = streak;
            
            // Promedio mensual
            const totalProgress = objectives.reduce((sum, obj) => sum + obj.current, 0);
            const average = objectives.length > 0 ? Math.round(totalProgress / objectives.length) : 0;
            document.getElementById('monthlyAverage').textContent = average + '%';
        }

        // Inicializar cuando se carga la p√°gina
        init();
    </script>
</body>
</html>
